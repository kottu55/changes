<h1>@<%= @user.account_name %><%= link_to "編集", edit_user_registration_path, class: "ml-5 btn btn-primary" %></h1>
<p><%= image_tag @user.account_img.url, class: "icon200size" if @user.account_img.present?  %></p>
<p><%= @user.area_code %></p>
<p><%= @user.introduction %></p>
<% if current_user == @user %>
<% end %>
<div>
    <p>投稿</p>
    <% @posts.publish.each do |post| %>
        <%= link_to post_path(post.id) do %>
        <%= image_tag post.before_img.url, class: "img200size" if post.before_img.present? %>
        <%= image_tag post.after_img.url, class: "img200size" if post.after_img.present?  %>
        <% end %>
        <%= post.caption %><br>
    <% end %>
    <% if current_user == @user %>
    <p>下書き</p>
    <% @posts.draft.each do |post| %>
        <%= link_to edit_post_path(post.id) do %>
        <%= image_tag post.before_img.url, class: "img200size" if post.before_img.present?  %>
        <%= image_tag post.after_img.url, class: "img200size" if post.after_img.present?  %>
        <% end %>
        <%= post.caption %><br>
    <% end %>
    <% end %>
    <p>フォロー中</p>
    <p>フォロワー</p>
    <p>お気に入り</p>
</div>
<p><%= link_to "戻る", users_path %></p>

<br>

<% unless current_user == nil %>
  <% unless current_user == @user %>
    <% if current_user&.following?(@user) %>
      <%= form_for(current_user&.relationships.find_by(follow_id: @user.id), html: { method: :delete }) do |f| %>
        <%= hidden_field_tag :follow_id, @user.id %>
        <%= f.submit 'Unfollow', class: 'btn btn-danger' %>
      <% end %>
    <% else %>
      <%= form_for(current_user&.relationships&.build) do |f| %>
        <%= hidden_field_tag :follow_id, @user.id %>
        <%= f.submit 'Follow', class: 'btn btn-primary' %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
<%= link_to "ログアウト", destroy_user_session_path, method: :delete  %>
